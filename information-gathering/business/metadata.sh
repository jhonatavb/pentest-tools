#!/bin/bash

if [[ $1 == "" || $2 == "" ]]; then
  echo "DESEC SECURITY"
  echo "Support: pdf, doc, docx, xls, xlsx, xlt"
  echo "How to use: ./metadata host format"
else
  if [ ! -d ./meta_files ]; then
    mkdir ./meta_files && cd ./meta_files
    lynx --dump "https://google.com/search?&q=site:$1+ext:$2" | grep ".$2" | cut -d "=" -f2 | egrep -v "ext|search|google" | sed "s/...$//" > urls_list
    [ -s urls_list ]
    if [ $? == "0" ]; then
      for url in $(cat urls_list); do
        wget -q $url
      done
      exiftool *.$2
    else
      echo "error while downloading"
    fi
    cd ../ && rm -rf meta_files/
  else
    echo "please, move or delete folder meta_files."
  fi
fi
